<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ì „ë¶ ë†ì´Œ ì¼ì—¬í–‰ ì‹œìŠ¤í…œ - í†µí•© ë²„ì „</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet" />
    <style>
      body {
        font-family: "Noto Sans KR", sans-serif;
        background-color: #f8f9fa;
      }
      .hero-section {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        padding: 4rem 0;
        margin-bottom: 2rem;
      }
      .step-indicator {
        display: flex;
        justify-content: center;
        margin-bottom: 2rem;
      }
      .step {
        padding: 0.5rem 1rem;
        margin: 0 0.5rem;
        border-radius: 25px;
        background: #e9ecef;
        color: #6c757d;
      }
      .step.active {
        background: #007bff;
        color: white;
      }
      .step.completed {
        background: #28a745;
        color: white;
      }
      .preference-button {
        background: #e9ecef;
        border: 1px solid #ced4da;
        color: #495057;
        padding: 0.75rem 1.5rem;
        border-radius: 25px;
        margin: 0.5rem;
        cursor: pointer;
        transition: all 0.2s;
        font-size: 0.95rem;
      }
      .preference-button.selected {
        background: #007bff;
        border-color: #007bff;
        color: white;
      }
      .preference-button:hover {
        background: #dee2e6;
        transform: translateY(-2px);
      }
      .preference-button.selected:hover {
        background: #0056b3;
      }
      .onboarding-step {
        display: none;
      }
      .onboarding-step.active {
        display: block;
      }
      .card-hover {
        transition: transform 0.2s, box-shadow 0.2s;
        cursor: pointer;
      }
      .card-hover:hover {
        transform: translateY(-5px);
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
      }
      .loading {
        display: none;
        text-align: center;
        padding: 2rem;
      }
      .spinner-border {
        width: 3rem;
        height: 3rem;
      }
    </style>
  </head>
  <body>
    <!-- Hero Section -->
    <div class="hero-section">
      <div class="container text-center">
        <h1 class="display-4 mb-3">ğŸŒ¾ ì „ë¶ ë†ì´Œ ì¼ì—¬í–‰</h1>
        <p class="lead">AI ê¸°ë°˜ ë§ì¶¤í˜• ë†ì´Œ ì¼ìë¦¬Â·ê´€ê´‘ í†µí•© ì¶”ì²œ ì‹œìŠ¤í…œ</p>
      </div>
    </div>

    <div class="container">
      <!-- ì˜¨ë³´ë”© ì„¹ì…˜ (ì²˜ìŒ ë°©ë¬¸ì‹œë§Œ í‘œì‹œ) -->
      <div id="onboarding-section">
        <!-- Onboarding Step Indicator -->
        <div class="step-indicator" id="onboarding-indicator">
            <div class="step active" id="indicator-1">ê¸°ë³¸ì •ë³´</div>
            <div class="step" id="indicator-2">ëˆ„êµ¬ì™€</div>
            <div class="step" id="indicator-3">í’ê²½ì„ í˜¸</div>
            <div class="step" id="indicator-4">ì—¬í–‰ìŠ¤íƒ€ì¼</div>
            <div class="step" id="indicator-5">ì²´í—˜ìœ í˜•</div>
            <div class="step" id="indicator-6">ì¶”ê°€ìš”ì²­</div>
        </div>

        <!-- Step 1: ê¸°ë³¸ ì •ë³´ ì…ë ¥ -->
        <div id="onboarding-step-1" class="onboarding-step active">
            <div class="row justify-content-center">
                <div class="col-md-8">
                    <div class="card">
                        <div class="card-header">
                            <h4><i class="fas fa-user text-primary me-2"></i>ê¸°ë³¸ ì •ë³´ë¥¼ ì•Œë ¤ì£¼ì„¸ìš”</h4>
                        </div>
                        <div class="card-body">
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label class="form-label">ì‹¤ì œ ì´ë¦„</label>
                                    <input type="text" class="form-control" id="real_name" value="ì§€í˜„">
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label class="form-label">ë‹‰ë„¤ì„</label>
                                    <input type="text" class="form-control" id="nickname" placeholder="ì‚¬ìš©í•  ë‹‰ë„¤ì„ì„ ì…ë ¥í•˜ì„¸ìš”">
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label class="form-label">ë‚˜ì´</label>
                                    <input type="number" class="form-control" id="age" min="1" max="120" placeholder="ì˜ˆ: 24">
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label class="form-label">ì„±ë³„</label>
                                    <select class="form-select" id="gender">
                                        <option value="">ì„±ë³„ì„ ì„ íƒí•˜ì„¸ìš”</option>
                                        <option value="ë‚¨">ë‚¨</option>
                                        <option value="ì—¬">ì—¬</option>
                                    </select>
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label class="form-label">ì‹œ/ë„</label>
                                    <select class="form-select" id="sido">
                                        <option value="">ì‹œ/ë„ë¥¼ ì„ íƒí•˜ì„¸ìš”</option>
                                        <option value="ì„œìš¸íŠ¹ë³„ì‹œ">ì„œìš¸íŠ¹ë³„ì‹œ</option>
                                        <option value="ë¶€ì‚°ê´‘ì—­ì‹œ">ë¶€ì‚°ê´‘ì—­ì‹œ</option>
                                        <option value="ëŒ€êµ¬ê´‘ì—­ì‹œ">ëŒ€êµ¬ê´‘ì—­ì‹œ</option>
                                        <option value="ì¸ì²œê´‘ì—­ì‹œ">ì¸ì²œê´‘ì—­ì‹œ</option>
                                        <option value="ê´‘ì£¼ê´‘ì—­ì‹œ">ê´‘ì£¼ê´‘ì—­ì‹œ</option>
                                        <option value="ëŒ€ì „ê´‘ì—­ì‹œ">ëŒ€ì „ê´‘ì—­ì‹œ</option>
                                        <option value="ìš¸ì‚°ê´‘ì—­ì‹œ">ìš¸ì‚°ê´‘ì—­ì‹œ</option>
                                        <option value="ì„¸ì¢…íŠ¹ë³„ìì¹˜ì‹œ">ì„¸ì¢…íŠ¹ë³„ìì¹˜ì‹œ</option>
                                        <option value="ê²½ê¸°ë„">ê²½ê¸°ë„</option>
                                        <option value="ê°•ì›ë„">ê°•ì›ë„</option>
                                        <option value="ì¶©ì²­ë¶ë„">ì¶©ì²­ë¶ë„</option>
                                        <option value="ì¶©ì²­ë‚¨ë„">ì¶©ì²­ë‚¨ë„</option>
                                        <option value="ì „ë¼ë¶ë„">ì „ë¼ë¶ë„</option>
                                        <option value="ì „ë¼ë‚¨ë„">ì „ë¼ë‚¨ë„</option>
                                        <option value="ê²½ìƒë¶ë„">ê²½ìƒë¶ë„</option>
                                        <option value="ê²½ìƒë‚¨ë„">ê²½ìƒë‚¨ë„</option>
                                        <option value="ì œì£¼íŠ¹ë³„ìì¹˜ë„">ì œì£¼íŠ¹ë³„ìì¹˜ë„</option>
                                    </select>
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label class="form-label">ì‹œ/êµ°/êµ¬</label>
                                    <input type="text" class="form-control" id="sigungu" placeholder="ì˜ˆ: ê°•ë‚¨êµ¬, ì˜ë“±í¬êµ¬, í™”ì„±ì‹œ">
                                </div>
                            </div>
                            <div class="text-center">
                                <button class="btn btn-primary btn-lg" onclick="goToOnboardingStep(2)">
                                    <i class="fas fa-arrow-right me-2"></i>ë‹¤ìŒ
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Step 2: ëˆ„êµ¬ì™€ ë– ë‚ ê¹Œìš”? -->
        <div id="onboarding-step-2" class="onboarding-step">
            <div class="row justify-content-center">
                <div class="col-md-8">
                    <div class="card">
                        <div class="card-header">
                            <h4><i class="fas fa-users text-success me-2"></i>ëˆ„êµ¬ì™€ ë– ë‚ ê¹Œìš”?</h4>
                        </div>
                        <div class="card-body">
                            <div class="text-center mb-4">
                                <p class="text-muted">í•¨ê»˜ ì—¬í–‰í•  ë™ë°˜ìë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”</p>
                            </div>
                            <div class="d-flex flex-wrap justify-content-center gap-3">
                                <div class="preference-button" data-step="2" data-value="í˜¼ì">
                                    <i class="fas fa-user me-2"></i>í˜¼ì
                                </div>
                                <div class="preference-button" data-step="2" data-value="ì¹œêµ¬ì™€">
                                    <i class="fas fa-user-friends me-2"></i>ì¹œêµ¬ì™€
                                </div>
                                <div class="preference-button" data-step="2" data-value="ì—°ì¸ê³¼">
                                    <i class="fas fa-heart me-2"></i>ì—°ì¸ê³¼
                                </div>
                                <div class="preference-button" data-step="2" data-value="ê°€ì¡±ê³¼">
                                    <i class="fas fa-home me-2"></i>ê°€ì¡±ê³¼
                                </div>
                                <div class="preference-button" data-step="2" data-value="ë™ë£Œì™€">
                                    <i class="fas fa-briefcase me-2"></i>ë™ë£Œì™€
                                </div>
                            </div>
                            <div class="text-center mt-4">
                                <button class="btn btn-secondary me-2" onclick="goToOnboardingStep(1)">
                                    <i class="fas fa-arrow-left me-2"></i>ì´ì „
                                </button>
                                <button class="btn btn-primary" onclick="goToOnboardingStep(3)">
                                    <i class="fas fa-arrow-right me-2"></i>ë‹¤ìŒ
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Step 3: í’ê²½ ì„ í˜¸ë„ -->
        <div id="onboarding-step-3" class="onboarding-step">
            <div class="row justify-content-center">
                <div class="col-md-10">
                    <div class="card">
                        <div class="card-header">
                            <h4><i class="fas fa-mountain text-info me-2"></i>ì–´ë–¤ í’ê²½ì„ ì¢‹ì•„í•˜ì‹œë‚˜ìš”?</h4>
                        </div>
                        <div class="card-body">
                            <div class="text-center mb-4">
                                <p class="text-muted">ì„ í˜¸í•˜ëŠ” í’ê²½ì„ ëª¨ë‘ ì„ íƒí•´ì£¼ì„¸ìš” (ë³µìˆ˜ì„ íƒ ê°€ëŠ¥)</p>
                            </div>
                            <div class="d-flex flex-wrap justify-content-center gap-3">
                                <div class="preference-button" data-step="3" data-value="ì‚°">
                                    <i class="fas fa-mountain me-2"></i>ì‚°
                                </div>
                                <div class="preference-button" data-step="3" data-value="ë°”ë‹¤">
                                    <i class="fas fa-water me-2"></i>ë°”ë‹¤
                                </div>
                                <div class="preference-button" data-step="3" data-value="ê°•Â·í˜¸ìˆ˜">
                                    <i class="fas fa-swimmer me-2"></i>ê°•Â·í˜¸ìˆ˜
                                </div>
                                <div class="preference-button" data-step="3" data-value="ìˆ²">
                                    <i class="fas fa-tree me-2"></i>ìˆ²
                                </div>
                                <div class="preference-button" data-step="3" data-value="ì„¬">
                                    <i class="fas fa-island-tropical me-2"></i>ì„¬
                                </div>
                            </div>
                            <div class="text-center mt-4">
                                <button class="btn btn-secondary me-2" onclick="goToOnboardingStep(2)">
                                    <i class="fas fa-arrow-left me-2"></i>ì´ì „
                                </button>
                                <button class="btn btn-primary" onclick="goToOnboardingStep(4)">
                                    <i class="fas fa-arrow-right me-2"></i>ë‹¤ìŒ
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Step 4: ì—¬í–‰ ìŠ¤íƒ€ì¼ -->
        <div id="onboarding-step-4" class="onboarding-step">
            <div class="row justify-content-center">
                <div class="col-md-10">
                    <div class="card">
                        <div class="card-header">
                            <h4><i class="fas fa-hiking text-warning me-2"></i>ì–´ë–¤ ì—¬í–‰ ìŠ¤íƒ€ì¼ì„ ì„ í˜¸í•˜ì‹œë‚˜ìš”?</h4>
                        </div>
                        <div class="card-body">
                            <div class="text-center mb-4">
                                <p class="text-muted">ì„ í˜¸í•˜ëŠ” ì—¬í–‰ ìŠ¤íƒ€ì¼ì„ ëª¨ë‘ ì„ íƒí•´ì£¼ì„¸ìš” (ë³µìˆ˜ì„ íƒ ê°€ëŠ¥)</p>
                            </div>
                            <div class="d-flex flex-wrap justify-content-center gap-3">
                                <div class="preference-button" data-step="4" data-value="íë§Â·ì—¬ìœ ">
                                    <i class="fas fa-leaf me-2"></i>íë§Â·ì—¬ìœ 
                                </div>
                                <div class="preference-button" data-step="4" data-value="ì²´í—˜í˜•">
                                    <i class="fas fa-hands me-2"></i>ì²´í—˜í˜•
                                </div>
                                <div class="preference-button" data-step="4" data-value="ì•¼ì™¸í™œë™">
                                    <i class="fas fa-running me-2"></i>ì•¼ì™¸í™œë™
                                </div>
                                <div class="preference-button" data-step="4" data-value="ë ˆì €Â·ì•¡í‹°ë¹„í‹°">
                                    <i class="fas fa-bicycle me-2"></i>ë ˆì €Â·ì•¡í‹°ë¹„í‹°
                                </div>
                                <div class="preference-button" data-step="4" data-value="ë¬¸í™”Â·ì—­ì‚¬">
                                    <i class="fas fa-landmark me-2"></i>ë¬¸í™”Â·ì—­ì‚¬
                                </div>
                                <div class="preference-button" data-step="4" data-value="ì¶•ì œÂ·ì´ë²¤íŠ¸">
                                    <i class="fas fa-calendar-alt me-2"></i>ì¶•ì œÂ·ì´ë²¤íŠ¸
                                </div>
                                <div class="preference-button" data-step="4" data-value="ë¨¹ê±°ë¦¬ íƒë°©">
                                    <i class="fas fa-utensils me-2"></i>ë¨¹ê±°ë¦¬ íƒë°©
                                </div>
                                <div class="preference-button" data-step="4" data-value="ì‚¬ì§„ ìŠ¤íŒŸ">
                                    <i class="fas fa-camera me-2"></i>ì‚¬ì§„ ìŠ¤íŒŸ
                                </div>
                            </div>
                            <div class="text-center mt-4">
                                <button class="btn btn-secondary me-2" onclick="goToOnboardingStep(3)">
                                    <i class="fas fa-arrow-left me-2"></i>ì´ì „
                                </button>
                                <button class="btn btn-primary" onclick="goToOnboardingStep(5)">
                                    <i class="fas fa-arrow-right me-2"></i>ë‹¤ìŒ
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Step 5: ì²´í—˜ ìœ í˜• -->
        <div id="onboarding-step-5" class="onboarding-step">
            <div class="row justify-content-center">
                <div class="col-md-10">
                    <div class="card">
                        <div class="card-header">
                            <h4><i class="fas fa-seedling text-success me-2"></i>ì–´ë–¤ ë†ì´Œ ì²´í—˜ì„ ì„ í˜¸í•˜ì‹œë‚˜ìš”?</h4>
                        </div>
                        <div class="card-body">
                            <div class="text-center mb-4">
                                <p class="text-muted">ì„ í˜¸í•˜ëŠ” ë†ì´Œ ì²´í—˜ ìœ í˜•ì„ ëª¨ë‘ ì„ íƒí•´ì£¼ì„¸ìš” (ë³µìˆ˜ì„ íƒ ê°€ëŠ¥)</p>
                            </div>
                            <div class="d-flex flex-wrap justify-content-center gap-3">
                                <div class="preference-button" data-step="5" data-value="ì±„ì†Œ">
                                    <i class="fas fa-carrot me-2"></i>ì±„ì†Œ
                                </div>
                                <div class="preference-button" data-step="5" data-value="ê³¼ìˆ˜">
                                    <i class="fas fa-apple-alt me-2"></i>ê³¼ìˆ˜
                                </div>
                                <div class="preference-button" data-step="5" data-value="í™”í›¼">
                                    <i class="fas fa-flower me-2"></i>í™”í›¼
                                </div>
                                <div class="preference-button" data-step="5" data-value="ì‹ëŸ‰ì‘ë¬¼">
                                    <i class="fas fa-wheat me-2"></i>ì‹ëŸ‰ì‘ë¬¼
                                </div>
                                <div class="preference-button" data-step="5" data-value="ì¶•ì‚°">
                                    <i class="fas fa-cow me-2"></i>ì¶•ì‚°
                                </div>
                                <div class="preference-button" data-step="5" data-value="ë†ê¸°ê³„">
                                    <i class="fas fa-tractor me-2"></i>ë†ê¸°ê³„
                                </div>
                            </div>
                            <div class="text-center mt-4">
                                <button class="btn btn-secondary me-2" onclick="goToOnboardingStep(4)">
                                    <i class="fas fa-arrow-left me-2"></i>ì´ì „
                                </button>
                                <button class="btn btn-primary" onclick="goToOnboardingStep(6)">
                                    <i class="fas fa-arrow-right me-2"></i>ë‹¤ìŒ
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Step 6: ì¶”ê°€ ìš”ì²­ì‚¬í•­ -->
        <div id="onboarding-step-6" class="onboarding-step">
            <div class="row justify-content-center">
                <div class="col-md-8">
                    <div class="card">
                        <div class="card-header">
                            <h4><i class="fas fa-edit text-danger me-2"></i>ì¶”ê°€ë¡œ ì›í•˜ëŠ” ê²ƒì´ ìˆë‚˜ìš”?</h4>
                        </div>
                        <div class="card-body">
                            <div class="text-center mb-4">
                                <p class="text-muted">ììœ ë¡­ê²Œ ì›í•˜ëŠ” ê²ƒì„ ì…ë ¥í•´ì£¼ì„¸ìš” (ê° ì¹¸ì— í•˜ë‚˜ì”©, ìµœëŒ€ 5ê°œ)</p>
                            </div>
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <input type="text" class="form-control" id="additional_1" placeholder="ì˜ˆ: ëšœë²…ì´ ì—¬í–‰">
                                </div>
                                <div class="col-md-6 mb-3">
                                    <input type="text" class="form-control" id="additional_2" placeholder="ì˜ˆ: ìì—° ì‚°ì±…">
                                </div>
                                <div class="col-md-6 mb-3">
                                    <input type="text" class="form-control" id="additional_3" placeholder="ì˜ˆ: ì‹œì¥íˆ¬ì–´">
                                </div>
                                <div class="col-md-6 mb-3">
                                    <input type="text" class="form-control" id="additional_4" placeholder="ì˜ˆ: ìˆ¨ê²¨ì§„ ë§›ì§‘">
                                </div>
                                <div class="col-12 mb-3">
                                    <input type="text" class="form-control" id="additional_5" placeholder="ì˜ˆ: ë¹µ, ë””ì €íŠ¸ íˆ¬ì–´">
                                </div>
                            </div>
                            <div class="text-center">
                                <button class="btn btn-secondary me-2" onclick="goToOnboardingStep(5)">
                                    <i class="fas fa-arrow-left me-2"></i>ì´ì „
                                </button>
                                <button class="btn btn-success btn-lg" onclick="completeOnboarding()">
                                    <i class="fas fa-check me-2"></i>ì˜¨ë³´ë”© ì™„ë£Œ
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
      </div>

      <!-- ì˜¨ë³´ë”© ì™„ë£Œ í›„ ë©”ì¸ í”Œë¡œìš° í‘œì‹œ -->
      <div id="main-flow" style="display: none;">
        <!-- Step Indicator -->
        <div class="step-indicator">
          <div class="step active" id="step1">1. ìì—°ì–´ ì…ë ¥</div>
          <div class="step" id="step2">2. ì¶”ì²œ ê²°ê³¼</div>
          <div class="step" id="step3">3. ì¼ì • ìƒì„±</div>
        </div>
        
        <!-- ì˜¨ë³´ë”© ë‹¤ì‹œí•˜ê¸° ë²„íŠ¼ -->
        <div class="text-center mb-4">
          <button class="btn btn-outline-secondary" onclick="restartOnboarding()">
            <i class="fas fa-user-edit me-2"></i>ì˜¨ë³´ë”© ë‹¤ì‹œí•˜ê¸°
          </button>
        </div>

        <!-- Step 1: ìì—°ì–´ ìš”ì²­ ì…ë ¥ -->
        <div id="natural-input-section" class="mb-5">
          <div class="row justify-content-center">
            <div class="col-md-8">
              <div class="card">
                <div class="card-header">
                  <h3><i class="fas fa-comments text-primary me-2"></i>ìì—°ì–´ ì—¬í–‰ ìš”ì²­</h3>
                </div>
                <div class="card-body">
                  <div class="mb-3">
                    <label class="form-label">ì–¸ì œ, ì–´ë””ì„œ, ë¬´ì—‡ì„ í•˜ê³  ì‹¶ìœ¼ì‹ ê°€ìš”?</label>
                    <textarea class="form-control" id="naturalQuery" rows="4" placeholder="ì˜ˆì‹œ: 10ì›” ì´ˆì— ì—´í˜ ì •ë„ ì „ë¶ ê¹€ì œì—ì„œ ê³¼ìˆ˜ì› ì²´í—˜í•˜ë©´ì„œ íë§í•˜ê³  ì‹¶ì–´. ì¶•ì œë„ ìˆìœ¼ë©´ ê°€ë³´ê³  ì‹¶ì–´."></textarea>
                  </div>
                  <div class="text-center">
                    <button class="btn btn-success btn-lg" onclick="searchRecommendations()">
                      <i class="fas fa-search me-2"></i>ì¶”ì²œ ë°›ê¸°
                    </button>
                    <button class="btn btn-outline-secondary ms-2" onclick="loadExample()">
                      ì˜ˆì‹œ ë¶ˆëŸ¬ì˜¤ê¸°
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Loading -->
        <div class="loading" id="loading">
          <div class="spinner-border text-primary" role="status"></div>
          <p class="mt-3">ì¶”ì²œ ê²°ê³¼ë¥¼ ê°€ì ¸ì˜¤ëŠ” ì¤‘...</p>
        </div>

        <!-- Step 2: ì¶”ì²œ ê²°ê³¼ -->
        <div id="results-section" class="mb-5" style="display: none">
          <div class="row">
            <!-- ë†ê°€ ì¶”ì²œ -->
            <div class="col-md-6">
              <h3><i class="fas fa-tractor text-success me-2"></i>ì¶”ì²œ ë†ê°€ (5ê°œ, 1ê°œë§Œ ì„ íƒ)</h3>
              <div id="jobCards"></div>
            </div>

            <!-- ê´€ê´‘ì§€ ì¶”ì²œ -->
            <div class="col-md-6">
              <h3><i class="fas fa-map-marked-alt text-info me-2"></i>ì¶”ì²œ ê´€ê´‘ì§€ (5ê°œ, ì›í•˜ëŠ” ë§Œí¼ ì„ íƒ)</h3>
              <div id="tourCards"></div>
            </div>
          </div>

          <div class="text-center mt-4">
            <button class="btn btn-success btn-lg" onclick="goToStep3()" id="generateBtn" disabled>
              <i class="fas fa-calendar me-2"></i>ì„ íƒí•œ ì¹´ë“œë¡œ ì¼ì • ìƒì„±
            </button>
          </div>
        </div>

        <!-- Step 3: ì¼ì • ìƒì„± ê²°ê³¼ -->
        <div id="itinerary-section" class="mb-5" style="display: none">
          <h3><i class="fas fa-calendar-alt text-primary me-2"></i>ìƒì„±ëœ ë§ì¶¤í˜• ì¼ì •</h3>
          <div id="itineraryResult"></div>

          <!-- ìˆ™ë°• ì¶”ì²œ ì„¹ì…˜ -->
          <div class="mt-5" id="accommodationSection" style="display: none">
            <h4><i class="fas fa-bed text-info me-2"></i>ì¶”ì²œ ìˆ™ë°•ì‹œì„¤ (í•´ë‹¹ ì§€ì—­)</h4>
            <div class="row" id="accommodationCards"></div>
          </div>

          <!-- ìŒì‹ì  ì¶”ì²œ ì„¹ì…˜ -->
          <div class="mt-4" id="restaurantSection" style="display: none">
            <h4><i class="fas fa-utensils text-success me-2"></i>ì¶”ì²œ ìŒì‹ì  (í•´ë‹¹ ì§€ì—­)</h4>
            <div class="row" id="restaurantCards"></div>
          </div>

          <!-- í”¼ë“œë°± ì„¹ì…˜ -->
          <div class="mt-4">
            <h4><i class="fas fa-comment text-warning me-2"></i>ì¼ì • í”¼ë“œë°±</h4>
            <div class="mb-3">
              <textarea class="form-control" id="feedback" rows="3" placeholder="ì¼ì • ìˆ˜ì • ìš”ì²­ì‚¬í•­ì„ ìì—°ì–´ë¡œ ì…ë ¥í•˜ì„¸ìš”"></textarea>
            </div>
            <button class="btn btn-warning" onclick="submitFeedback()" id="feedbackBtn">í”¼ë“œë°± ì œì¶œ</button>
          </div>

          <!-- AI ì—¬í–‰ ìš”ì•½ ì„¹ì…˜ -->
          <div class="mt-4">
            <h4><i class="fas fa-magic text-success me-2"></i>AI ì—¬í–‰ ìš”ì•½</h4>
            <p class="text-muted">ì¼ì •ì´ ë§ˆìŒì— ë“œì‹œë©´ AIê°€ ìƒì„±í•œ ë§¤ë ¥ì ì¸ ì—¬í–‰ ìš”ì•½ì„ ë°›ì•„ë³´ì„¸ìš”!</p>
            <button class="btn btn-success" onclick="generateTravelSummary()" id="summaryBtn">âœ¨ AI ì—¬í–‰ ìš”ì•½ ìƒì„±</button>
            
            <!-- AI ì—¬í–‰ ìš”ì•½ ê²°ê³¼ -->
            <div id="travelSummaryResult" class="mt-3" style="display: none;">
              <div class="alert alert-success">
                <h5><i class="fas fa-sparkles me-2"></i>AI ì—¬í–‰ ì—ë””í„°ì˜ ì¶”ì²œ</h5>
                <div id="travelSummaryContent" class="mt-3">
                  <!-- AI ìƒì„± ìš”ì•½ì´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤ -->
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script>
      // ì „ì—­ ë³€ìˆ˜
      let selectedFarm = null;
      let selectedTours = [];
      let currentItineraryId = null;

      // ì˜¨ë³´ë”© ë°ì´í„° ì €ì¥ìš© ë³€ìˆ˜
      let onboardingData = {
        real_name: '',
        nickname: '',
        age: '',
        gender: '',
        sido: '',
        sigungu: '',
        companion: [],
        landscape: [],
        travel_style: [],
        activity_type: [],
        additional_requests: []
      };

      // í˜ì´ì§€ ë¡œë“œ ì‹œ ì‹¤í–‰
      document.addEventListener('DOMContentLoaded', function() {
        // ê¸°ì¡´ ì‚¬ìš©ì ë°ì´í„°ê°€ ìˆëŠ”ì§€ í™•ì¸
        const userData = localStorage.getItem('userData');
        if (userData) {
          // ê¸°ì¡´ ì‚¬ìš©ìë¼ë©´ ë©”ì¸ í”Œë¡œìš°ë¡œ ë°”ë¡œ ì´ë™
          document.getElementById('onboarding-section').style.display = 'none';
          document.getElementById('main-flow').style.display = 'block';
        }

        // ì„ í˜¸ë„ ë²„íŠ¼ í´ë¦­ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
        document.addEventListener('click', function(e) {
          if (e.target.closest('.preference-button')) {
            const button = e.target.closest('.preference-button');
            const step = button.dataset.step;
            const value = button.dataset.value;
            
            if (step === '2') {
              // 2ë‹¨ê³„ëŠ” ë‹¨ì¼ ì„ íƒ
              document.querySelectorAll('[data-step="2"]').forEach(btn => btn.classList.remove('selected'));
              button.classList.add('selected');
              onboardingData.companion = [value];
            } else {
              // 3,4,5ë‹¨ê³„ëŠ” ë‹¤ì¤‘ ì„ íƒ
              button.classList.toggle('selected');
              
              const category = step === '3' ? 'landscape' : 
                              step === '4' ? 'travel_style' : 'activity_type';
              
              if (button.classList.contains('selected')) {
                if (!onboardingData[category].includes(value)) {
                  onboardingData[category].push(value);
                }
              } else {
                onboardingData[category] = onboardingData[category].filter(v => v !== value);
              }
            }
          }
        });
      });

      function goToOnboardingStep(step) {
        // í˜„ì¬ ë‹¨ê³„ì—ì„œ ë°ì´í„° ìˆ˜ì§‘
        if (step === 2) {
          // 1ë‹¨ê³„ ë°ì´í„° ìˆ˜ì§‘
          onboardingData.real_name = document.getElementById('real_name').value;
          onboardingData.nickname = document.getElementById('nickname').value;
          onboardingData.age = document.getElementById('age').value;
          onboardingData.gender = document.getElementById('gender').value;
          onboardingData.sido = document.getElementById('sido').value;
          onboardingData.sigungu = document.getElementById('sigungu').value;
        } else if (step === 7) {
          // 6ë‹¨ê³„ ì™„ë£Œ ì‹œ ì¶”ê°€ ìš”ì²­ì‚¬í•­ ìˆ˜ì§‘
          onboardingData.additional_requests = [
            document.getElementById('additional_1').value,
            document.getElementById('additional_2').value,
            document.getElementById('additional_3').value,
            document.getElementById('additional_4').value,
            document.getElementById('additional_5').value
          ].filter(v => v.trim() !== '');
        }

        // ëª¨ë“  ì˜¨ë³´ë”© ë‹¨ê³„ ìˆ¨ê¸°ê¸°
        document.querySelectorAll('.onboarding-step').forEach(el => {
          el.classList.remove('active');
        });
        
        // ëª¨ë“  ì¸ë””ì¼€ì´í„° ë¹„í™œì„±í™”
        document.querySelectorAll('[id^="indicator-"]').forEach(el => {
          el.classList.remove('active');
        });

        // ìƒˆ ë‹¨ê³„ í‘œì‹œ
        document.getElementById(`onboarding-step-${step}`).classList.add('active');
        document.getElementById(`indicator-${step}`).classList.add('active');
      }

      async function completeOnboarding() {
        // 6ë‹¨ê³„ ë°ì´í„° ìˆ˜ì§‘
        onboardingData.additional_requests = [
          document.getElementById('additional_1').value,
          document.getElementById('additional_2').value,
          document.getElementById('additional_3').value,
          document.getElementById('additional_4').value,
          document.getElementById('additional_5').value
        ].filter(v => v.trim() !== '');

        console.log('ì˜¨ë³´ë”© ë°ì´í„°:', onboardingData);

        try {
          // API í˜¸ì¶œí•˜ì—¬ ì‚¬ìš©ì ë°ì´í„° ì €ì¥
          const response = await fetch('/api/onboarding', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({
              real_name: onboardingData.real_name,
              name: onboardingData.nickname || onboardingData.real_name,
              age: onboardingData.age,
              gender: onboardingData.gender,
              sido: onboardingData.sido,
              sigungu: onboardingData.sigungu,
              with_whom: onboardingData.companion[0],
              selected_views: onboardingData.landscape,
              selected_styles: onboardingData.travel_style,
              selected_jobs: onboardingData.activity_type,
              additional_requests: onboardingData.additional_requests
            })
          });

          const result = await response.json();
          
          if (result.status === 'success') {
            // ì‚¬ìš©ì ì •ë³´ ì €ì¥
            const userData = {
              user_id: result.user_id,
              ...onboardingData,
              preferences: {
                landscape_keywords: onboardingData.landscape,
                travel_style_keywords: onboardingData.travel_style,
                job_type_keywords: onboardingData.activity_type,
                simple_natural_words: onboardingData.additional_requests
              }
            };
            localStorage.setItem('userData', JSON.stringify(userData));
            
            // ì˜¨ë³´ë”© ì™„ë£Œ, ë©”ì¸ í”Œë¡œìš°ë¡œ ì „í™˜
            document.getElementById('onboarding-section').style.display = 'none';
            document.getElementById('main-flow').style.display = 'block';
            
            alert(`ì•ˆë…•í•˜ì„¸ìš” ${userData.nickname || userData.real_name}ë‹˜! ì˜¨ë³´ë”©ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤. ì´ì œ ìì—°ì–´ë¡œ ì—¬í–‰ì„ ìš”ì²­í•´ë³´ì„¸ìš”.`);
          } else {
            alert('ì˜¤ë¥˜: ' + (result.message || 'ì˜¨ë³´ë”© ì €ì¥ ì‹¤íŒ¨'));
          }
        } catch (error) {
          alert('ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜: ' + error.message);
        }
      }

      function restartOnboarding() {
        document.getElementById('main-flow').style.display = 'none';
        document.getElementById('onboarding-section').style.display = 'block';
        goToOnboardingStep(1);
      }

      // ì˜ˆì‹œ ë°ì´í„° ë¡œë“œ
      function loadExample() {
        document.getElementById('naturalQuery').value = '10ì›” ì´ˆì— ì—´í˜ ì •ë„ ì „ë¶ ê¹€ì œì—ì„œ ê³¼ìˆ˜ì› ì²´í—˜í•˜ë©´ì„œ íë§í•˜ê³  ì‹¶ì–´. ì¶•ì œë„ ìˆìœ¼ë©´ ê°€ë³´ê³  ì‹¶ì–´.';
      }

      async function searchRecommendations() {
        const naturalQuery = document.getElementById('naturalQuery').value.trim();
        if (!naturalQuery) {
          alert('ì—¬í–‰ ìš”ì²­ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
          return;
        }

        // ë¡œë”© í‘œì‹œ
        document.getElementById('natural-input-section').style.display = 'none';
        document.getElementById('loading').style.display = 'block';

        try {
          const userData = JSON.parse(localStorage.getItem('userData') || '{}');
          
          const response = await fetch('/recommendations/with-user', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({
              user_id: userData.user_id || 'demo_user',
              natural_request: naturalQuery
            })
          });

          const result = await response.json();
          
          if (result.status === 'success') {
            displayRecommendations({
              farms: result.data.farms || [],
              tour_spots: result.data.tour_spots || []
            });
          } else {
            alert('ì˜¤ë¥˜: ' + (result.message || 'ì¶”ì²œ ì‹¤íŒ¨'));
          }
        } catch (error) {
          alert('ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜: ' + error.message);
        } finally {
          document.getElementById('loading').style.display = 'none';
        }
      }

      // ì¶”ì²œ ê²°ê³¼ í‘œì‹œ
      function displayRecommendations(data) {
        // ë†ê°€ ì¹´ë“œ í‘œì‹œ
        const jobCardsHtml = data.farms
          .map(
            (farm, index) => `
                <div class="card card-hover mb-3" onclick="selectFarm(${index})">
                    ${
                      farm.photo
                        ? `<img src="${farm.photo}" class="card-img-top" style="height: 200px; object-fit: cover;" alt="${farm.farm}">`
                        : ''
                    }
                    <div class="card-body">
                        <h5 class="card-title">${farm.farm || farm.title || 'ë†ê°€ ì´ë¦„ ì—†ìŒ'}</h5>
                        <h6 class="card-subtitle mb-2 text-muted">${farm.title || ''}</h6>
                        <p class="card-text">
                            ğŸ“ ${farm.address || ''}<br>
                            â° ${farm.start_time || ''} - ${farm.end_time || ''}
                            ${farm.tag ? `<br>ğŸ·ï¸ ${farm.tag}` : ''}
                            ${farm.required_people ? `<br>ğŸ‘¥ ${farm.required_people}ëª…` : ''}
                        </p>
                    </div>
                </div>
            `
          )
          .join('');
        document.getElementById('jobCards').innerHTML = jobCardsHtml;

        // ê´€ê´‘ì§€ ì¹´ë“œ í‘œì‹œ
        const tourCardsHtml = data.tour_spots
          .map(
            (spot, index) => `
                <div class="card card-hover mb-3" onclick="selectTour(${index})">
                    ${
                      spot.photo
                        ? `<img src="${spot.photo}" class="card-img-top" style="height: 200px; object-fit: cover;" alt="${spot.name}">`
                        : ''
                    }
                    <div class="card-body">
                        <h5 class="card-title">${spot.name || 'ê´€ê´‘ì§€ ì´ë¦„ ì—†ìŒ'}</h5>
                        <p class="card-text">
                            ğŸ“ ${spot.address || ''}
                            ${
                              spot.overview
                                ? `<br><small class="text-muted">${spot.overview}</small>`
                                : ''
                            }
                        </p>
                    </div>
                </div>
            `
          )
          .join('');
        document.getElementById('tourCards').innerHTML = tourCardsHtml;

        // ë°ì´í„° ì €ì¥
        window.currentRecommendations = data;

        // í™”ë©´ ì „í™˜
        document.getElementById('results-section').style.display = 'block';
        document.getElementById('step1').classList.replace('active', 'completed');
        document.getElementById('step2').classList.add('active');
      }

      // ë†ê°€ ì„ íƒ (1ê°œë§Œ)
      function selectFarm(index) {
        // ê¸°ì¡´ ì„ íƒ í•´ì œ
        document.querySelectorAll('#jobCards .card').forEach(card => {
          card.classList.remove('border-primary');
          card.style.borderWidth = '';
          card.style.backgroundColor = '';
        });

        // ìƒˆë¡œ ì„ íƒ
        const selectedCard = document.querySelectorAll('#jobCards .card')[index];
        selectedCard.classList.add('border-primary');
        selectedCard.style.borderWidth = '2px';
        selectedCard.style.backgroundColor = '#f8f9ff';
        
        selectedFarm = window.currentRecommendations.farms[index];
        updateGenerateButton();
      }

      // ê´€ê´‘ì§€ ì„ íƒ (ì—¬ëŸ¬ ê°œ)
      function selectTour(index) {
        const card = document.querySelectorAll('#tourCards .card')[index];
        const tour = window.currentRecommendations.tour_spots[index];

        if (card.classList.contains('border-primary')) {
          card.classList.remove('border-primary');
          card.style.borderWidth = '';
          card.style.backgroundColor = '';
          selectedTours = selectedTours.filter(t => t.tour_id !== tour.tour_id && t.name !== tour.name);
        } else {
          card.classList.add('border-primary');
          card.style.borderWidth = '2px';
          card.style.backgroundColor = '#f8f9ff';
          selectedTours.push(tour);
        }

        updateGenerateButton();
      }

      // ì¼ì • ìƒì„± ë²„íŠ¼ í™œì„±í™” ì²´í¬
      function updateGenerateButton() {
        const btn = document.getElementById('generateBtn');
        btn.disabled = !selectedFarm || selectedTours.length === 0;
      }

      // Step 3ë¡œ ì´ë™ (ì¼ì • ìƒì„±)
      async function goToStep3() {
        if (!selectedFarm || selectedTours.length === 0) {
          alert('ë†ê°€ 1ê°œì™€ ê´€ê´‘ì§€ 1ê°œ ì´ìƒì„ ì„ íƒí•´ì£¼ì„¸ìš”.');
          return;
        }

        try {
          const userData = JSON.parse(localStorage.getItem('userData') || '{}');
          
          const response = await fetch('/api/schedule/with-user', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({
              user_id: userData.user_id || 'demo_user',
              natural_request: document.getElementById('naturalQuery').value,
              selected_farm: selectedFarm,
              selected_tours: selectedTours
            })
          });

          const result = await response.json();

          if (result.status === 'success') {
            currentItineraryId = result.data.itinerary_id;
            displayItinerary(result.data);
          } else {
            alert('ì˜¤ë¥˜: ' + (result.message || 'API í˜¸ì¶œ ì‹¤íŒ¨'));
          }
        } catch (error) {
          alert('ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜: ' + error.message);
        }
      }

      // ì¼ì • ê²°ê³¼ í‘œì‹œ
      function displayItinerary(data) {
        const itineraryContent =
          data.schedule_text ||
          data.natural_language_itinerary ||
          'ì¼ì • ìƒì„±ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.';

        document.getElementById('itineraryResult').innerHTML = `
          <div class="alert alert-success">
            âœ… ${
              data.days || data.total_days || '?'
            }ì¼ ë§ì¶¤í˜• ì¼ì •ì´ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤! ${
          data.region ? `(${data.region} ì§€ì—­)` : ''
        } (ID: ${data.itinerary_id || 'N/A'})
          </div>
          <div class="card">
            <div class="card-body">
              <div style="white-space: pre-wrap; line-height: 1.6;">${itineraryContent}</div>
            </div>
          </div>
        `;

        // ìˆ™ë°•ì‹œì„¤ ì¹´ë“œ í‘œì‹œ
        if (data.accommodations && data.accommodations.length > 0) {
          displayAccommodationCards(data.accommodations);
          document.getElementById('accommodationSection').style.display = 'block';
        }

        // ìŒì‹ì  ì¹´ë“œ í‘œì‹œ
        if (data.restaurants && data.restaurants.length > 0) {
          displayRestaurantCards(data.restaurants);
          document.getElementById('restaurantSection').style.display = 'block';
        }

        document.getElementById('itinerary-section').style.display = 'block';
        document.getElementById('results-section').style.display = 'none';
        document.getElementById('step2').classList.replace('active', 'completed');
        document.getElementById('step3').classList.add('active');
      }

      // ìˆ™ë°•ì‹œì„¤ ì¹´ë“œ í‘œì‹œ
      function displayAccommodationCards(accommodations) {
        const cardsHtml = accommodations
          .map(
            acc => `
              <div class="col-md-4 mb-3">
                <div class="card h-100">
                  ${
                    acc.photo
                      ? `<img src="${acc.photo}" class="card-img-top" style="height: 200px; object-fit: cover;" alt="${acc.name}">`
                      : '<div class="card-img-top bg-light d-flex align-items-center justify-content-center" style="height: 200px;"><i class="fas fa-bed fa-3x text-muted"></i></div>'
                  }
                  <div class="card-body">
                    <h6 class="card-title">${acc.name}</h6>
                    <p class="card-text small">ğŸ“ ${acc.address}</p>
                  </div>
                </div>
              </div>
            `
          )
          .join('');
        document.getElementById('accommodationCards').innerHTML = cardsHtml;
      }

      // ìŒì‹ì  ì¹´ë“œ í‘œì‹œ
      function displayRestaurantCards(restaurants) {
        const cardsHtml = restaurants
          .map(
            rest => `
              <div class="col-md-4 mb-3">
                <div class="card h-100">
                  ${
                    rest.photo
                      ? `<img src="${rest.photo}" class="card-img-top" style="height: 200px; object-fit: cover;" alt="${rest.name}">`
                      : '<div class="card-img-top bg-light d-flex align-items-center justify-content-center" style="height: 200px;"><i class="fas fa-utensils fa-3x text-muted"></i></div>'
                  }
                  <div class="card-body">
                    <h6 class="card-title">${rest.name}</h6>
                    <p class="card-text small">ğŸ“ ${rest.address}</p>
                  </div>
                </div>
              </div>
            `
          )
          .join('');
        document.getElementById('restaurantCards').innerHTML = cardsHtml;
      }

      // í”¼ë“œë°± ì œì¶œ
      async function submitFeedback() {
        const feedback = document.getElementById('feedback').value.trim();

        if (!feedback) {
          alert('í”¼ë“œë°± ë‚´ìš©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
          return;
        }

        try {
          const userData = JSON.parse(localStorage.getItem('userData') || '{}');
          
          const response = await fetch('/api/schedule/feedback', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({
              user_id: userData.user_id || 'demo_user',
              feedback: feedback
            })
          });

          const result = await response.json();

          if (result.status === 'success') {
            displayFeedbackResult(result.data);
          } else {
            alert('ì˜¤ë¥˜: ' + (result.message || 'API í˜¸ì¶œ ì‹¤íŒ¨'));
          }
        } catch (error) {
          alert('ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜: ' + error.message);
        }
      }

      // í”¼ë“œë°± ê²°ê³¼ í‘œì‹œ
      function displayFeedbackResult(data) {
        const changesHtml = (data.changes_summary || [])
          .map(change => `<li>${change}</li>`)
          .join('');
        const itineraryContent =
          data.schedule_text ||
          data.updated_itinerary ||
          data.natural_language_itinerary ||
          'ì¼ì •ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.';

        document.getElementById('itineraryResult').innerHTML = `
          <div class="alert alert-success">
            âœ… í”¼ë“œë°±ì´ ë°˜ì˜ë˜ì–´ ì¼ì •ì´ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤!
          </div>
          ${
            changesHtml
              ? `<div class="alert alert-info">
              <h5>ìˆ˜ì •ì‚¬í•­:</h5>
              <ul>${changesHtml}</ul>
            </div>`
              : ''
          }
          <div class="card">
            <div class="card-body">
              <h5>ìˆ˜ì •ëœ ì¼ì •:</h5>
              <div style="white-space: pre-wrap; line-height: 1.6;">${itineraryContent}</div>
            </div>
          </div>
        `;
      }

      // AI ì—¬í–‰ ìš”ì•½ ìƒì„±
      async function generateTravelSummary() {
        if (!currentItineraryId) {
          alert('ìƒì„±ëœ ì¼ì •ì´ ì—†ìŠµë‹ˆë‹¤. ë¨¼ì € ì¼ì •ì„ ìƒì„±í•´ì£¼ì„¸ìš”.');
          return;
        }

        const summaryBtn = document.getElementById('summaryBtn');
        const originalText = summaryBtn.textContent;
        
        try {
          summaryBtn.textContent = 'ğŸ¨ AI ì—¬í–‰ ìš”ì•½ ìƒì„± ì¤‘...';
          summaryBtn.disabled = true;

          const response = await fetch(`/api/schedule/${currentItineraryId}/summary`, {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json'
            }
          });

          const result = await response.json();

          if (result.status === 'success') {
            displayTravelSummary(result.data);
            document.getElementById('travelSummaryResult').style.display = 'block';
          } else {
            alert('ì˜¤ë¥˜: ' + (result.message || 'AI ì—¬í–‰ ìš”ì•½ ìƒì„± ì‹¤íŒ¨'));
          }
        } catch (error) {
          alert('ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜: ' + error.message);
        } finally {
          summaryBtn.textContent = originalText;
          summaryBtn.disabled = false;
        }
      }

      // AI ì—¬í–‰ ìš”ì•½ ê²°ê³¼ í‘œì‹œ
      function displayTravelSummary(data) {
        const summaryContent = data.travel_summary || 'ì—¬í–‰ ìš”ì•½ì„ ìƒì„±í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.';
        
        document.getElementById('travelSummaryContent').innerHTML = `
          <div class="p-3" style="background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%); border-radius: 10px; border-left: 5px solid #28a745;">
            <div style="white-space: pre-wrap; line-height: 1.8; font-size: 1.1rem; color: #495057;">
              ${summaryContent}
            </div>
          </div>
          <div class="text-muted mt-2 text-center">
            <small><i class="fas fa-robot me-1"></i>GPT-4o AI ì—¬í–‰ ì—ë””í„°ê°€ ìƒì„±í•œ ê°œì¸í™”ëœ ì—¬í–‰ ìš”ì•½ì…ë‹ˆë‹¤</small>
          </div>
        `;
      }
    </script>
  </body>
</html>