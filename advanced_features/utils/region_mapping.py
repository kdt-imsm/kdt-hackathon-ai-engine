# 전북 지역 매핑 시스템
# System_Improvements.md 요구사항에 따라 전북 14개 지역으로 한정

# 전북특별자치도 지역 데이터
jeonbuk_regions = {
    "고창군": [
        "고창읍", "고수면", "공음면", "대산면", "무장면", "부안면",
        "상하면", "성내면", "성송면", "신림면", "심원면",
        "아산면", "안남면", "해리면", "흥덕면"
    ],
    "군산시": [
        "나운동", "나포면", "대야면", "미성동", "옥구읍", "옥산면",
        "옥서면", "임피면", "회현면", "개정동", "소룡동", "월명동"
    ],
    "김제시": [
        "검산동", "교동", "금산면", "만경읍", "백구면", "백산면",
        "봉남면", "부량면", "성덕면", "신풍동", "용지면",
        "죽산면", "청하면", "황산면"
    ],
    "남원시": [
        "금동", "도통동", "왕정동", "향교동", "운봉읍", "산내면",
        "주천면", "송동면", "주생면", "이백면", "대산면",
        "인월면", "아영면", "동충동"
    ],
    "무주군": [
        "무주읍", "안성면", "부남면", "설천면", "적상면"
    ],
    "부안군": [
        "부안읍", "계화면", "동진면", "변산면", "보안면", "상서면",
        "위도면", "주산면", "줄포면", "진서면", "하서면", "행안면"
    ],
    "순창군": [
        "순창읍", "구림면", "금과면", "동계면", "복흥면",
        "쌍치면", "유등면", "인계면", "적성면", "팔덕면"
    ],
    "완주군": [
        "삼례읍", "봉동읍", "용진읍", "상관면", "구이면", "소양면",
        "이서면", "고산면", "비봉면", "운주면", "화산면", "경천면"
    ],
    "익산시": [
        "중앙동", "남중동", "삼성동", "평화동", "영등동",
        "팔봉동", "춘포면", "왕궁면", "삼기면", "용동면", "용안면",
        "망성면", "함열읍", "웅포면", "황등면"
    ],
    "임실군": [
        "임실읍", "강진면", "덕치면", "삼계면", "성수면",
        "오수면", "운암면", "신평면", "청웅면", "지사면"
    ],
    "장수군": [
        "장수읍", "산서면", "번암면", "계남면", "계북면",
        "천천면", "장계면"
    ],
    "전주시": [
        "덕진구", "완산구"
    ],
    "정읍시": [
        "수성동", "연지동", "농소동", "북면", "산외면",
        "소성면", "신태인읍", "영원면", "옹동면", "칠보면",
        "태인면", "흥덕면"
    ],
    "진안군": [
        "진안읍", "용담면", "동향면", "상전면", "백운면",
        "성수면", "안천면", "마령면", "부귀면"
    ]
}

# 별칭 처리 (사용자가 "순창" 입력 → "순창군"으로 매핑)
jeonbuk_aliases = {
    "고창": "고창군",
    "군산": "군산시",
    "김제": "김제시",
    "남원": "남원시",
    "무주": "무주군",
    "부안": "부안군",
    "순창": "순창군",
    "완주": "완주군",
    "익산": "익산시",
    "임실": "임실군",
    "장수": "장수군",
    "전주": "전주시",
    "정읍": "정읍시",
    "진안": "진안군"
}

def normalize_region_name(user_input: str) -> str:
    """
    사용자 입력을 표준 지역명으로 변환
    
    Args:
        user_input: 사용자가 입력한 지역명 (예: "고창", "고수면", "무주군")
        
    Returns:
        표준 지역명 (예: "고창군", "고창군", "무주군")
    """
    # 공백 제거
    user_input = user_input.strip()
    
    # 별칭 처리 먼저 확인
    if user_input in jeonbuk_aliases:
        return jeonbuk_aliases[user_input]
    
    # 이미 표준 지역명인 경우
    if user_input in jeonbuk_regions:
        return user_input
    
    # 하위 읍/면/동으로 입력된 경우 상위 지역 찾기
    for region, sub_areas in jeonbuk_regions.items():
        if user_input in sub_areas:
            return region
    
    # 찾지 못한 경우 None 반환
    return None

def get_region_list() -> list:
    """전북 14개 지역 목록 반환"""
    return list(jeonbuk_regions.keys())

def get_sub_areas(region: str) -> list:
    """특정 지역의 하위 읍/면/동 목록 반환"""
    normalized_region = normalize_region_name(region)
    if normalized_region and normalized_region in jeonbuk_regions:
        return jeonbuk_regions[normalized_region]
    return []

def is_jeonbuk_region(region: str) -> bool:
    """입력된 지역이 전북 지역인지 확인"""
    return normalize_region_name(region) is not None