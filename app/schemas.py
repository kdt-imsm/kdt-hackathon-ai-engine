"""
app/schemas.py
==============

Pydantic ë°ì´í„° ëª¨ë¸(Pydantic Schemas) ì •ì˜ ëª¨ë“ˆ
FastAPI ì—”ë“œí¬ì¸íŠ¸ Request/Response ë°”ë”” ê²€ì¦ ë° ë¬¸ì„œí™”ë¥¼ ë‹´ë‹¹í•©ë‹ˆë‹¤.

ì„¹ì…˜ë³„ ì—­í• 
------------
1. ìŠ¬ë¡¯ ì¶”ì¶œ ê´€ë ¨ ëª¨ë¸
   * `SlotQuery`      : ìì—°ì–´ ì…ë ¥ íŒŒì‹± ìš”ì²­ ë°”ë””
   * `JobPreview`     : ì¼ê±°ë¦¬ ì¹´ë“œ ë¯¸ë¦¬ë³´ê¸°(ë‹¨ê±´)
   * `TourPreview`    : ê´€ê´‘ì§€ ì¹´ë“œ ë¯¸ë¦¬ë³´ê¸°(ë‹¨ê±´)
   * `SlotsResponse`  : ìŠ¬ë¡¯ + ì¹´ë“œ 10ê°œ ë¯¸ë¦¬ë³´ê¸° ì‘ë‹µ

2. ì¶”ì²œ(ì¼ì • ìƒì„±) ê´€ë ¨ ëª¨ë¸
   * `RecommendationRequest` : ê³µí†µ í•„ë“œ(query, user_id, budget)
   * `RecommendRequest`      : ì„ íƒí•œ ì¹´ë“œ ID ë¦¬ìŠ¤íŠ¸ë¥¼ ì¶”ê°€í•œ ìµœì¢… ìš”ì²­

3. ì¼ì •(Itinerary) ëª¨ë¸
   * `ScheduleItem` : í•˜ë£¨ ë‹¨ìœ„ ì¼ì • í•­ëª©
   * `Itinerary`    : í–¥í›„ í™•ì¥ ê°€ëŠ¥ì„±ì„ ìœ„í•´ ScheduleItem ì„ ê·¸ëŒ€ë¡œ ìƒì†

ì£¼ì˜ì‚¬í•­
~~~~~~~~
â€¢ ì´ ëª¨ë“ˆì€ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì´ ì—†ëŠ” ìˆœìˆ˜ ë°ì´í„° í´ë˜ìŠ¤ë§Œ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤.
â€¢ í•„ë“œ ìˆœì„œë‚˜ íƒ€ì…ì„ ë³€ê²½í•˜ë©´ FastAPI ìŠ¤í™ ë° í´ë¼ì´ì–¸íŠ¸ì™€ì˜ ê³„ì•½ì´ ê¹¨ì§ˆ ìˆ˜ ìˆìœ¼ë¯€ë¡œ, ê¸°ì¡´ í•„ë“œëŠ” ê·¸ëŒ€ë¡œ ìœ ì§€í•´ì•¼ í•©ë‹ˆë‹¤.
"""

from typing import List, Optional
from uuid import UUID
from pydantic import BaseModel, Field

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# 1) ìŠ¬ë¡¯ ì¶”ì¶œìš© ìŠ¤í‚¤ë§ˆ
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

class SlotQuery(BaseModel):
    """ì‚¬ìš©ì ìì—°ì–´ ì¿¼ë¦¬ í•˜ë‚˜ë¥¼ ê°ì‹¸ëŠ” Request Body ëª¨ë¸."""
    query: str = Field(
        ...,  # í•„ìˆ˜ê°’
        example="9ì›” ì²«ì§¸ ì£¼ ê³ ì°½ì—ì„œ ì¡°ê°œì¡ì´ + í•´ë³€ ê´€ê´‘í•˜ê³  ì‹¶ì–´ìš”",
        description="ì¼Â·ì—¬í–‰ ì¡°ê±´ì´ í¬í•¨ëœ ìì—°ì–´ ë¬¸ì¥",
    )


# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# 2) ì¹´ë“œ ë¯¸ë¦¬ë³´ê¸° ì‘ë‹µ ëª¨ë¸
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

class JobPreview(BaseModel):
    """ë²¡í„° ìœ ì‚¬ë„ ìƒìœ„ Job(ì¼ê±°ë¦¬) ì¹´ë“œ ë©”íƒ€ë°ì´í„°."""
    job_id: int
    farm_name: str
    region: str
    tags: List[str]


class TourPreview(BaseModel):
    """ë²¡í„° ìœ ì‚¬ë„ ìƒìœ„ Tour(ê´€ê´‘ì§€) ì¹´ë“œ ë©”íƒ€ë°ì´í„°."""
    content_id: int
    title: str
    region: str
    overview: str
    image_url: Optional[str] = None  # ğŸ”¥ NEW: ì´ë¯¸ì§€ URL í•„ë“œ ì¶”ê°€


class SlotsResponse(BaseModel):
    """/slots ì—”ë“œí¬ì¸íŠ¸ ì‘ë‹µ ëª¨ë¸."""
    slots: dict  # GPT Slot Extraction ê²°ê³¼(JSON)
    jobs_preview: List[JobPreview]
    tours_preview: List[TourPreview]


# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# 3) ì¶”ì²œ ìš”ì²­ ìŠ¤í‚¤ë§ˆ
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

class RecommendationRequest(BaseModel):
    """ì¶”ì²œ(ì¼ì • ìƒì„±) ìš”ì²­ ê³µí†µ í•„ë“œ."""
    query: str
    user_id: Optional[UUID] = None  # ë¡œê·¸ì¸ ì‚¬ìš©ì ì‹ë³„ì(ì˜µì…˜)
    budget: int  # ì „ì²´ ì—¬í–‰ ì˜ˆì‚°(â‚©)


class RecommendRequest(RecommendationRequest):
    """/recommend ì—”ë“œí¬ì¸íŠ¸ ìµœì¢… Request Body."""
    selected_jobs: List[int] = Field(default_factory=list)
    selected_tours: List[int] = Field(default_factory=list)


# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# 4) ì¼ì •(Itinerary) ëª¨ë¸
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

class ScheduleItem(BaseModel):
    """í•˜ë£¨ ë‹¨ìœ„ ì—¬í–‰Â·ì¼ê±°ë¦¬ Schedule."""
    day: int
    date: str
    plan_items: List[str]
    total_distance_km: Optional[float]
    total_cost_krw: Optional[int]


class Itinerary(ScheduleItem):
    """í˜„ì¬ëŠ” ScheduleItemê³¼ ë™ì¼í•˜ì§€ë§Œ í–¥í›„ ë‹¤ì¤‘ ì¼ì •ì„ ìœ„í•œ ë˜í¼."""

    pass  # í™•ì¥ì„ ìœ„í•´ ë¹„ì›Œë‘ 
